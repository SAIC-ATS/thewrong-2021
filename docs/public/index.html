<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Pan-Tilt-Zoom</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- <link href="css/style.css" rel="stylesheet" /> -->

    <!-- Google Roboto font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@200&display=swap"
      rel="stylesheet"
    />

    <style>

      html {
	      padding: 0;
	      margin: 0;
      }

      body {
        padding: 8px 0px 0px 0px;
        margin: 0px;
      }

      #main {
        margin: auto;
        margin-bottom:50px;
        text-align: center;
        border: 1px solid gray;
        background-color: rgb(250, 250, 250);
        border-radius: 5px;
        padding: 0px 20px 20px 20px;
        width: 800px;
      }

      #header {
        width: 100%;
        display: block;
        height: 90px;
      }

      #title-bar {
        display:flex;
        justify-content:space-between;
        align-items:center;
        padding: 15px 0px 0px 0px;
      }

      #title {
        /* padding-bottom: 20px; */
        color: darkblue;
        text-align: center;
        font-family: "Roboto Mono", monospace;
        font-size: 2em;
      }

      .artlink {
        padding: 3px 10px;
        text-decoration: underline dashed;
      }

      #videowindow {
        position: relative;
        text-align: center;
      }

      #videostream {
        width: 100%;
        border: 1px solid gray;
        box-shadow: 0px 2px 5px rgb(200, 200, 200);

      }

      #loading {
        display: none; 
        /* display: block; */
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-family: "Roboto Mono", monospace;
        font-weight: bold;
        font-size: 1.2em;
        box-shadow: 0px 2px 2px rgb(200, 200, 200);
        background-color: white;
        padding: 2px;
        z-index: 2;
      }

      #info-button {
        float: right;
            position: relative;
            z-index: 10;
            cursor: pointer;
            user-select: none;

      }

      #infoOverlay {
        /* display: none;  */
        display: block;
        position: absolute;
        background-color: aliceblue;
        border: 1px solid gray;
        box-shadow: 5px 5px 5px rgb(200, 200, 200);
        padding: 15px;
        top: 21px;
        font-family: "Roboto Mono", monospace;
        text-align: justify;
        z-index: 6;
      }

      #info-title-bar {
        display: flex;
        justify-content: space-between;

      }

      #explanatory {
        margin: auto;
        max-width: 650px;
        font-family: "Roboto Mono", monospace;
      }

      #artists {
        margin: auto;
        max-width: 600px;
        /* text-align: justify;  */
        text-align-last: center;
        font-family: "Roboto Mono", monospace;
      }

      a {
        display: inline-block;
        font-family: "Roboto Mono", monospace;
      }

      /* unvisited link */
      a:link {
        color: #0000EE;;
        text-decoration: none;
      }

      /* visited link */
      a:visited {
        color: #0000EE;;
        text-decoration: none;
      }

      /* mouse over link */
      a:hover {
        color: hotpink;
        text-decoration: underline dashed;
      }

      #controls {
        padding: 10px;
        margin: auto;
        font-family: "Roboto Mono", monospace;
      }

      .modal {
        overflow: hidden;
        transition: transform 0.3s ease-out;
        height: auto;
        transform: scaleY(1);
        transform-origin: top;
      }

      .modal.collapsed {
        transform: scaleY(0);
      }

      #description-box-container {
        position: relative;
        text-align: center;
      }

      #description-box {
         /* display: none;  */
         display: block;
        position: absolute;
        background-color: aliceblue;
        border: 1px solid gray;
        box-shadow: 5px 5px 5px rgb(200, 200, 200);
        padding: 15px;
        top: 21px;
        font-family: "Roboto Mono", monospace;
        text-align: justify;
        z-index: 6;
      }

      #description-title {
        font-weight: bold;
      }

      #close-window {
        float: right;
      }

      .control-container {
        display: grid; 
        grid-auto-rows: 1fr; 
        grid-template-columns: 1fr min-content min-content min-content 1fr; 
        gap: 0px 0px; 
        margin: auto;
        text-align: center;
      }

      .label {
        display: flex;
        justify-content: right;
        align-content: center;
      }

      .label-mobile {
	      display: none;
      }

      .left-arrow-div {
        background-color: white;
        border: 1px solid gray;
        border-radius: 4px;
        height: 100%;
        vertical-align: middle;
        padding: 0px 5px;
        display: inline-block;
        margin: 0 5px;
        display: flex;
        align-items: center;
        transform: scaleX(-1);
        /* display: inline-block; */
      }

      .right-arrow-div {
        background-color: white;
        border: 1px solid gray;
        border-radius: 4px;
        height: 100%;
        vertical-align: middle;
        padding: 0px 5px;
        display: inline-block;
        margin: 0 5px;
        display: flex;
        align-items: center;
        /* display: inline-block; */
      }

      .control-bars {
        background-color: white;
        border: 1px solid gray;
        border-radius: 4px;
        height: 100%;
        vertical-align: middle;
        padding: 0px 5px;
        display: inline-block;

      }

      @media (max-width: 800px) {
        #main {
          width: 90%;
          min-width: 0px;
        }
        
        #titlebar {
          font-size: 1.0em;
        }

        .control-container {
          /* display: flex;	
          justify-content: center; */
          display: grid; 
          grid-auto-rows: 1fr; 
         grid-template-columns: 1fr min-content min-content min-content 1fr; 
          gap: 0px 0px; 
          margin: auto;
          text-align: center;
        }

        .left-arrow-div, .right-arrow-div {
          padding: 0px 7px;
        }

        /* .right-arrow-div {
          padding: 7px 7px;
        } */

        #info-button, #infoOverlay, #artists, #explanatory, #description-box-container {
          font-size: .7em;
        }

        .label {
          font-size: .7em;
        }

        #pan-bar, #tilt-bar, #zoom-bar {
          width: 150px;
        }

      }
    </style>

    <script>
      function toggleInfo() {
        document.getElementById("infoOverlay").classList.toggle("collapsed");
      }

      function toggleDescription() {
        document.getElementById("description-box").classList.toggle("collapsed");
      }

    </script>

  </head>

  <body>
    <div id="main">
      <div id="title-bar">
        <img src="images/ATS-SAIC.png" style="margin-top:5px;" width="10%"/>
        <h1 id="title">Pan-Tilt-Zoom</h1>
        <img src="images/tw5_logo-7.png" width="15%">
      </div>
      <div><a class="artlink" id="info-button" onclick="toggleInfo(); return false;" href="#" title="info"> info </a></div>

      <div id="videowindow">
        <div id="infoOverlay" class="modal collapsed">
          <p>
            <span id="info-title-bar"><b>Pan-Tilt-Zoom</b> <a class="artlink" id="close-window" title="close" href="#" onclick="toggleInfo(); return false;">close (X)</a></span> 
            
            <br /><br />Minds without a body; phantom flesh; vision
            without a gaze. We have opted for our biological body to mutate into
            a telematic and a Cartesian body. We remotely transit cyberspace
            territories, we use more than one body, more than one gaze. Our
            biological body is more like a zombie, because it is there, but in
            an absent way. We are still here, but our eyes wander in other
            universes. We have "(...) a sliding and shifting consciousness that
            is neither &lt;&lt;completely here&gt;&gt;, in this body, nor
            &lt;&lt;completely there&gt;&gt;, in those bodies." We rely on
            technology to expand our body; we desire to let the flesh die; a
            camera sees better than our eyes. <br /><br />
            The exhibition arises as an idea of permanent visibility, using an
            artifact of political technology, which is transformed into a device
            of voyeurism, and telepresence for those eyes that need artificial
            vision. The eye-camera is subjected to a device, which many times is
            not being observed by any person: it is being transmitted to a
            machine and not to an observer. By whom are we being watched?
            <br /><br />
            The works presented in Pan-Tilt-Zoom have been conceived on small
            screens to recall the unfolding of the point of view, and to resort
            to other ocular perceptions. These are works subjected to a field of
            vision given by the electronic image.
            <br /><br />
          </p>
        </div>
        <!-- original stream is 704x480 -->
        <img id="videostream" src="/feed"/>
        <!-- <img id="videostream" src="images/test-image.jpg" /> -->
        <!-- <br /> -->
        <h1 id="loading">Camera loading...</h1>
      </div>



      <div id="explanatory">
        Go directly to: <a id="ET" title="explanatory text" href="#" onclick="moveCamToArtist('explanatorytext');return false;">explanatory text</a>
      </div>
      <br />

      <div id="artists">
        <span style="display: inline-block; padding: 0px 10px">Go directly to:</span>
        <a class="artlink" id="RA" title="Reid Arowood" href="#" onclick="moveCamToArtist('reid');return false;">Reid Arowood</a>
        <a class="artlink" id="NA" title="Nimrod Astarhan" href="#" onclick="moveCamToArtist('nimo');return false;">Nimrod Astarhan</a>
        <a class="artlink" id="SB" title="Sarah Brophy" href="#" onclick="moveCamToArtist('sarah');return false;">Sarah Brophy</a>
        <a class="artlink" id="JCD" title="Juliana Castro Duperly" href="#" onclick="moveCamToArtist('juliana');return false;">Juliana Castro Duperly</a>
        <a class="artlink" id="BFC" title="Blake Fall-Conroy" href="#" onclick="moveCamToArtist('blake');return false;">Blake Fall-Conroy</a>
        <a class="artlink" id="JF" title="Juan Flores"  href="#" onclick="moveCamToArtist('juan');return false;">Juan Flores</a>
        <a class="artlink" id="TG" title="Tom Gal" href="#" onclick="moveCamToArtist('tom');return false;">Tom Gal</a>
        <a class="artlink" id="SG" title="Sydney Gush" href="#" onclick="moveCamToArtist('sydney');return false;">Sydney Gush</a>
        <a class="artlink" id="MP" title="Mac Pierce" href="#" onclick="moveCamToArtist('mac');return false;">Mac Pierce</a>
        <a class="artlink" id="MP2" title="Michael Powell" href="#" onclick="moveCamToArtist('michael');return false;">Michael Powell</a>
        <a class="artlink" id="JS" title="Jade Sheng" href="#" onclick="moveCamToArtist('jade');return false;">Jade Sheng</a>
        <a class="artlink" id="KX" title="Kelly Xi" href="#" onclick="moveCamToArtist('kelly');return false;">Kelly Xi</a>
      </div>

      <div id="description-box-container">
        <div id="description-box" class="modal collapsed"><span id="description-title"><b>Work Title </b></span>&nbsp;<span id="description-year">(year)</span><a class="artlink" id="close-window" title="close window" href="#" onclick="toggleDescription(); return false;">close (X)</a><br />
          
          <span id="description-materials">Wood, Metal, Spit, AC Power</span>
          
          <br /><br />
        
          <p id="description-text">Description goes here.</p>
        
        </div>
      </div>      



      <div id="controls">
        <br />

        <div class="label-mobile">Pan: </div>
        <div class="control-container">

          <div class="label">Pan: </div>
          <div id="left-pan" class="left-arrow-div" onclick="moveCamRelative('pan-left');return false;"><img width="15px" src=images/arrow.png></div>
          <div class="control-bars"><img id="pan-bar" src="images/panbar.png"></div>
          <div id="right-pan" class="right-arrow-div" onclick="moveCamRelative('pan-right');return false;"><img width="15px" src=images/arrow.png></div>
          <div></div>
        </div>

        <br />

        <div class="label-mobile">Tilt: </div>
        <div class="control-container">

          <div class="label">Tilt: </div>
          <div id="left-tilt" class="left-arrow-div" onclick="moveCamRelative('tilt-left');return false;"><img width="15px" src=images/arrow.png></div>
          <div class="control-bars"><img id="tilt-bar" src="images/panbar.png"></div>
          <div id="right-tilt" class="right-arrow-div" onclick="moveCamRelative('tilt-right');return false;"><img width="15px" src=images/arrow.png></div>
          <div></div>
        </div>

        <br />

        <div class="label-mobile">Zoom: </div>
        <div class="control-container">
        
          <div class="label">Zoom: </div>
          <div id="left-zoom" class="left-arrow-div" onclick="moveCamRelative('zoom-left');return false;"><img width="15px" src=images/arrow.png></div>
          <div class="control-bars"><img id="zoom-bar" src="images/zoombar.png"></div>
          <div id="right-zoom" class="right-arrow-div" onclick="moveCamRelative('zoom-right');return false;"><img width="15px" src=images/arrow.png></div>
          <div></div>
        </div>

        <br />
        <br />

      </div>


      <script>
        const baseUrl = "";

        //--- Function that sends camera to individual artist location in gallery ---
        function moveCamToArtist(person) {
          //--- Set up camera http request ---
          const xhttp = new XMLHttpRequest();
          // Define a callback function
          xhttp.onreadystatechange = function () {
            // 4 is status return:"done" https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/response
            if (xhttp.readyState === 4) {
              document.getElementById("loading").style.display = "none";
            }
          };

          //--- Determine which link was clicked and send camera instruction ---
         
          var descriptionDims = document.getElementById('description-box').getBoundingClientRect();
          var descriptionHeight = descriptionDims.height;
          if (descriptionHeight < 10 && person != 'explanatorytext'){
            toggleDescription();
          }

          

          switch (person) {
            case "reid":
              console.log("reid");
              //--- Set CGI request params ---

              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos2&camera=1&autofocus=on&autoiris=on");
              // toggleDescription();
              document.getElementById("description-title").innerHTML = "Reid's project";
              document.getElementById("description-year").innerHTML = "2022";
              document.getElementById("description-materials").innerHTML = "Wood, Metal, Spit";
              document.getElementById("description-text").innerHTML = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida lectus lacinia tristique pretium. Praesent pharetra sodales dui nec semper. Fusce id imperdiet sapien, id gravida nulla. Vivamus sit amet mauris dolor. Fusce maximus lectus fermentum, tincidunt turpis in, rutrum ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer lacinia ultrices malesuada. In hac habitasse platea dictumst. Aenean in tellus suscipit est egestas venenatis. Aliquam a ullamcorper sem, ac varius urna. Duis rutrum condimentum metus.";
              break;

            case "nimo":
              console.log("nimo");
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos3&camera=1&autofocus=on&autoiris=on");
              // toggleDescription();
              document.getElementById("description-title").innerHTML = "Nimo's project";
              document.getElementById("description-year").innerHTML = "2022";
              document.getElementById("description-materials").innerHTML = "Wood, Metal, Spit";
              document.getElementById("description-text").innerHTML = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida lectus lacinia tristique pretium. Praesent pharetra sodales dui nec semper. Fusce id imperdiet sapien, id gravida nulla. Vivamus sit amet mauris dolor. Fusce maximus lectus fermentum, tincidunt turpis in, rutrum ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer lacinia ultrices malesuada. In hac habitasse platea dictumst. Aenean in tellus suscipit est egestas venenatis. Aliquam a ullamcorper sem, ac varius urna. Duis rutrum condimentum metus.";

              break;

            case "sarah":
              console.log("sarah");
              //--- Set CGI request params ---
              xhttp.open("GET",baseUrl + "/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos4&camera=1&autofocus=on&autoiris=on");
              // toggleDescription();
              document.getElementById("description-title").innerHTML = "Sarah's project";
              document.getElementById("description-year").innerHTML = "2022";
              document.getElementById("description-materials").innerHTML = "Wood, Metal, Spit";
              document.getElementById("description-text").innerHTML = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida lectus lacinia tristique pretium. Praesent pharetra sodales dui nec semper. Fusce id imperdiet sapien, id gravida nulla. Vivamus sit amet mauris dolor. Fusce maximus lectus fermentum, tincidunt turpis in, rutrum ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer lacinia ultrices malesuada. In hac habitasse platea dictumst. Aenean in tellus suscipit est egestas venenatis. Aliquam a ullamcorper sem, ac varius urna. Duis rutrum condimentum metus.";
              break;

            case "juliana":
              console.log("juliana");
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos2&camera=1&autofocus=on&autoiris=on");
              // toggleDescription();
              document.getElementById("description-title").innerHTML = "Juliana's project";
              document.getElementById("description-year").innerHTML = "2022";
              document.getElementById("description-materials").innerHTML = "Wood, Metal, Spit";
              document.getElementById("description-text").innerHTML = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida lectus lacinia tristique pretium. Praesent pharetra sodales dui nec semper. Fusce id imperdiet sapien, id gravida nulla. Vivamus sit amet mauris dolor. Fusce maximus lectus fermentum, tincidunt turpis in, rutrum ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer lacinia ultrices malesuada. In hac habitasse platea dictumst. Aenean in tellus suscipit est egestas venenatis. Aliquam a ullamcorper sem, ac varius urna. Duis rutrum condimentum metus.";
              break;

            case "blake":
              console.log("blake");
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos3&camera=1&autofocus=on&autoiris=on");
              // toggleDescription();
              document.getElementById("description-title").innerHTML = "Nimo's project";
              document.getElementById("description-year").innerHTML = "2022";
              document.getElementById("description-materials").innerHTML = "Wood, Metal, Spit";
              document.getElementById("description-text").innerHTML = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida lectus lacinia tristique pretium. Praesent pharetra sodales dui nec semper. Fusce id imperdiet sapien, id gravida nulla. Vivamus sit amet mauris dolor. Fusce maximus lectus fermentum, tincidunt turpis in, rutrum ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer lacinia ultrices malesuada. In hac habitasse platea dictumst. Aenean in tellus suscipit est egestas venenatis. Aliquam a ullamcorper sem, ac varius urna. Duis rutrum condimentum metus.";
              break;

            case "juan":
              console.log("juan");
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?camera=1&pan=46.0413&tilt=-22.5000&zoom=2726&autofocus=on&autoiris=on");
              // toggleDescription();
              document.getElementById("description-title").innerHTML = "Juan's project";
              document.getElementById("description-year").innerHTML = "2022";
              document.getElementById("description-materials").innerHTML = "Wood, Metal, Spit";
              document.getElementById("description-text").innerHTML = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida lectus lacinia tristique pretium. Praesent pharetra sodales dui nec semper. Fusce id imperdiet sapien, id gravida nulla. Vivamus sit amet mauris dolor. Fusce maximus lectus fermentum, tincidunt turpis in, rutrum ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer lacinia ultrices malesuada. In hac habitasse platea dictumst. Aenean in tellus suscipit est egestas venenatis. Aliquam a ullamcorper sem, ac varius urna. Duis rutrum condimentum metus.";
              break;

            case "tom":
              console.log("tom");
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos2&camera=1&autofocus=on&autoiris=on");
              // toggleDescription();
              document.getElementById("description-title").innerHTML = "Tom's project";
              document.getElementById("description-year").innerHTML = "2022";
              document.getElementById("description-materials").innerHTML = "Wood, Metal, Spit";
              document.getElementById("description-text").innerHTML = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida lectus lacinia tristique pretium. Praesent pharetra sodales dui nec semper. Fusce id imperdiet sapien, id gravida nulla. Vivamus sit amet mauris dolor. Fusce maximus lectus fermentum, tincidunt turpis in, rutrum ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer lacinia ultrices malesuada. In hac habitasse platea dictumst. Aenean in tellus suscipit est egestas venenatis. Aliquam a ullamcorper sem, ac varius urna. Duis rutrum condimentum metus.";
              break;

            case "sydney":
              console.log("sydney");
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos3&camera=1&autofocus=on&autoiris=on");
              // toggleDescription();
              document.getElementById("description-title").innerHTML = "Sydney's project";
              document.getElementById("description-year").innerHTML = "2022";
              document.getElementById("description-materials").innerHTML = "Wood, Metal, Spit";
              document.getElementById("description-text").innerHTML = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida lectus lacinia tristique pretium. Praesent pharetra sodales dui nec semper. Fusce id imperdiet sapien, id gravida nulla. Vivamus sit amet mauris dolor. Fusce maximus lectus fermentum, tincidunt turpis in, rutrum ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer lacinia ultrices malesuada. In hac habitasse platea dictumst. Aenean in tellus suscipit est egestas venenatis. Aliquam a ullamcorper sem, ac varius urna. Duis rutrum condimentum metus.";
              break;

              case "mac":
              console.log("mac");
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?camera=1&pan=22.62&tilt=-90&zoom=1&autofocus=on&autoiris=on");
              // toggleDescription();
              document.getElementById("description-title").innerHTML = "Mac's project";
              document.getElementById("description-year").innerHTML = "2022";
              document.getElementById("description-materials").innerHTML = "Wood, Metal, Spit";
              document.getElementById("description-text").innerHTML = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida lectus lacinia tristique pretium. Praesent pharetra sodales dui nec semper. Fusce id imperdiet sapien, id gravida nulla. Vivamus sit amet mauris dolor. Fusce maximus lectus fermentum, tincidunt turpis in, rutrum ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer lacinia ultrices malesuada. In hac habitasse platea dictumst. Aenean in tellus suscipit est egestas venenatis. Aliquam a ullamcorper sem, ac varius urna. Duis rutrum condimentum metus.";
              break;
            
              case "michael":
              console.log("michael");
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos4&camera=1&autofocus=on&autoiris=on");
              // toggleDescription();
              document.getElementById("description-title").innerHTML = "Michael's project";
              document.getElementById("description-year").innerHTML = "2022";
              document.getElementById("description-materials").innerHTML = "Wood, Metal, Spitr";
              document.getElementById("description-text").innerHTML = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida lectus lacinia tristique pretium. Praesent pharetra sodales dui nec semper. Fusce id imperdiet sapien, id gravida nulla. Vivamus sit amet mauris dolor. Fusce maximus lectus fermentum, tincidunt turpis in, rutrum ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer lacinia ultrices malesuada. In hac habitasse platea dictumst. Aenean in tellus suscipit est egestas venenatis. Aliquam a ullamcorper sem, ac varius urna. Duis rutrum condimentum metus.";
              break;

              case "jade":
              console.log("jade");
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos4&camera=1&autofocus=on&autoiris=on");
              // toggleDescription();
              document.getElementById("description-title").innerHTML = "Jade's project";
              document.getElementById("description-year").innerHTML = "2022";
              document.getElementById("description-materials").innerHTML = "Wood, Metal, Spitr";
              document.getElementById("description-text").innerHTML = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida lectus lacinia tristique pretium. Praesent pharetra sodales dui nec semper. Fusce id imperdiet sapien, id gravida nulla. Vivamus sit amet mauris dolor. Fusce maximus lectus fermentum, tincidunt turpis in, rutrum ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer lacinia ultrices malesuada. In hac habitasse platea dictumst. Aenean in tellus suscipit est egestas venenatis. Aliquam a ullamcorper sem, ac varius urna. Duis rutrum condimentum metus.";
              break;

              case "kelly":
              console.log("kelly");
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos2&camera=1&autofocus=on&autoiris=on");
              // toggleDescription();
              document.getElementById("description-title").innerHTML = "Kelly's project";
              document.getElementById("description-year").innerHTML = "2022";
              document.getElementById("description-materials").innerHTML = "Wood, Metal, Spit";
              document.getElementById("description-text").innerHTML = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus gravida lectus lacinia tristique pretium. Praesent pharetra sodales dui nec semper. Fusce id imperdiet sapien, id gravida nulla. Vivamus sit amet mauris dolor. Fusce maximus lectus fermentum, tincidunt turpis in, rutrum ante. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer lacinia ultrices malesuada. In hac habitasse platea dictumst. Aenean in tellus suscipit est egestas venenatis. Aliquam a ullamcorper sem, ac varius urna. Duis rutrum condimentum metus.";
              break;

              case "explanatorytext":
              console.log("explanatorytext");
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos2&camera=1&autofocus=on&autoiris=on");
              break;

            default:
              console.log("Nothing picked, how did you get here? Error. ");
          }

          //--- Send off selected parameters to camera through http request ---
          xhttp.send();
          //--- Turn on loading sign until camera calls back "done"
          document.getElementById("loading").style.display = "block";

        } //end moveCamToArtist


    document.getElementById('pan-bar').onclick = function clickEvent(e) {
      // e = Mouse click event.
      var rect = e.target.getBoundingClientRect();
      var panx = e.clientX - rect.left; //x position within the element.
      var sliderWidth = rect.width;
      let degrees = (panx/sliderWidth) * 360;
      degrees = Math.round(degrees);
      console.log("pan cursor position: " + panx + ", and degrees: " + degrees);
      moveCamAbsolute('pan', degrees);
    }

    document.getElementById('tilt-bar').onclick = function clickEvent(e) {
      // e = Mouse click event.
      var rect = e.target.getBoundingClientRect();
      var panx = e.clientX - rect.left; //x position within the element.
      var sliderWidth = rect.width;
      let degrees = (panx/sliderWidth) * 90;
      degrees = Math.round(degrees);
      console.log("tilt cursor position: " + panx + ", and degrees: " + degrees);
      moveCamAbsolute('tilt', -degrees); //degrees need to be negative (0 to -90) when cam is upside down (attached to ceiling!)
    }

    document.getElementById('zoom-bar').onclick = function clickEvent(e) {
      // e = Mouse click event.
      var rect = e.target.getBoundingClientRect();
      var panx = e.clientX - rect.left; //x position within the element.
      var sliderWidth = rect.width;
      let steps = (panx/sliderWidth) * 19999;
      steps = Math.round(steps);
      if(steps < 200){
        steps = 0;
      }
      console.log("zoom cursor position: " + panx + ", and steps: " + steps);
      moveCamAbsolute('zoom', steps);
    }


    function moveCamAbsolute(axis, value) {
      //--- Set up camera http request ---
      const xhttp = new XMLHttpRequest();
      // Define a callback function
      xhttp.onreadystatechange = function () {
        // 4 is status return:"done" https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/response
        if (xhttp.readyState === 4) {
          document.getElementById("loading").style.display = "none";
        }
      };

      switch (axis) {

            case "pan":
              console.log("commanding abs pan (0-360 degrees): " + value);
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?camera=1&pan=" + value + "&autofocus=on&autoiris=on");
              break;

            case "tilt":
              console.log("commanding abs tilt (0-90 degrees): " + value);
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?camera=1&tilt=" + value + "&autofocus=on&autoiris=on");
              break;

            case "zoom":
              console.log("commanding abs zoom (0-19999 steps): " + value);
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?camera=1&zoom=" + value + "&autofocus=on&autoiris=on");
              break;

            default:
              console.log("No axis picked, how did you get here? Error.");
          }

          //--- Send off selected parameters to camera through http request ---
          xhttp.send();
          //--- Turn on loading sign until camera calls back "done"
          document.getElementById("loading").style.display = "block";
     
    } //end moveCamAbsolute


    function moveCamRelative(axis){
      console.log("move cam relative");
          //--- Set up camera http request ---
          const xhttp = new XMLHttpRequest();
      // Define a callback function
      xhttp.onreadystatechange = function () {
        // 4 is status return:"done" https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/response
        if (xhttp.readyState === 4) {
          document.getElementById("loading").style.display = "none";
        }
      };


//https://ptz-app.netlify.app/camera/axis-cgi/com/axis-cgi/com/ptzqueue.cgi?TimeoutType=activity&TimeoutTime=1

      let panValue = 5;
      let tiltValue = 2;
      let zoomValue = 100;

      switch (axis) {

            case "pan-left":
              console.log("commanding relative pan: " + -panValue);
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?camera=1&rpan=" + -panValue + "&autofocus=on&autoiris=on");
              break;
            
            case "pan-right":
              console.log("commanding relative pan: " + panValue);
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?camera=1&rpan=" + panValue + "&autofocus=on&autoiris=on");
              break;

              case "tilt-left":
              console.log("commanding relative tilt: " + -tiltValue);
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?camera=1&rtilt" + -tiltValue + "&autofocus=on&autoiris=on");
              break;
              
            case "tilt-right":
              console.log("commanding relative tilt: " + tiltValue);
              //--- Set CGI request params ---
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?camera=1&rtilt" + tiltValue + "&autofocus=on&autoiris=on");
              break;

            case "zoom-left":
              console.log("commanding relative zoom: " + -zoomValue);
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?camera=1&rzoom" + -zoomValue + "&autofocus=on&autoiris=on");
              break;
            
            case "zoom-right":
              console.log("commanding relative zoom: " + zoomValue);
              xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?camera=1&rzoom" + zoomValue + "&autofocus=on&autoiris=on");
              break;

            default:
              console.log("No relative axis picked, how did you get here? Error.");
          }

          //--- Send off selected parameters to camera through http request ---
          xhttp.send();
          //--- Turn on loading sign until camera calls back "done"
          document.getElementById("loading").style.display = "block";
     
    } //end moveCamRelative


    //--- Move Cam on Video Click ---

    document.getElementById('videostream').onclick = function clickEvent(e) {
      // e = Mouse click event.
      var rect = e.target.getBoundingClientRect();
      var x = e.clientX - rect.left; //x position within the element.
      var y = e.clientY - rect.top; //y pos in element
      var imgWidth = rect.width;
      var imgHeight = rect.height;

      var calcX = Math.round( (x/imgWidth) * 704);
      var calcY = Math.round( (y/imgHeight) * 480);

      console.log("true x position: "+ x + ", true y pos: " + y);
      console.log("calculated x: "+ calcX + ", calc y: " + calcY);

      //--- Set up camera http request ---
      const xhttp = new XMLHttpRequest();
      // Define a callback function
      xhttp.onreadystatechange = function () {
        if (xhttp.readyState === 4) {
          document.getElementById("loading").style.display = "none";
        }
      };

      xhttp.open("GET", baseUrl + "/camera/axis-cgi/com/ptz.cgi?camera=1&center=" + calcX + "," + calcY + "&autofocus=on&autoiris=on");

      //--- Send off selected parameters to camera through http request ---
      xhttp.send();
      //--- Turn on loading sign until camera calls back "done"
      document.getElementById("loading").style.display = "block";
     
    } //end moveCamClick



</script>


  </body>
</html>
