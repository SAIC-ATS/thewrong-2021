<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- <link href="css/style.css" rel="stylesheet" /> -->
  </head>
  <body>
    <div
      align="center"
      style="
        border: 1px solid lightgray;
        border-radius: 5px;
        padding: 20px;
        width: 800px;
        margin: auto;
      "
    >
      <div>
        <h3 style="color: blue">Live-Webcam-Remote-Update</h3>
      </div>



      <div style="position: relative; text-align: center;">
        <img style="width:100%;" src="/feed"><br />
        <h1 id="loading" style="display: none; position: absolute; top:50%; left: 50%; transform: translate(-50%, -50%);">Camera loading... </h1>
      </div>

      

      <!-- ARTIST LOCATION PRESETS -->
      <label for="artist-select">Artists:</label>
      <select name="artists" onchange="val()" id="dropdown">
        <option value="Default">--Select--</option>
        <option value="RA">Reid Arowood</option>
        <option value="NA">Nimrod Astarhan</option>
        <option value="SB">Sarah Brophy</option>
        <option value="JCD">Juliana Castro Duperly</option>
        <option value="BFC">Blake Fall-Conroy</option>
        <option value="JF">Juan Flores</option>
        <option value="TG">Tom Gal</option>
        <option value="SG">Sydney Gush</option>
        <option value="MP">Mac Pierce</option>
      </select>



     

      <div id="controls" style="padding: 10px">
        <table>
          <!-- PAN  -->
          
          <tr>
            <td align="left">
              <strong style="padding-right: 10px">PAN:</strong>
            </td>
            <td><button type="">&#8592;</button></td>
            <td>
              <input
                style="vertical-align: middle"
                id="pan_slider"
                type="range"
                min="5"
                max="200"
                step="5"
                value="100"
              />
              <button type="">&#8594;</button>
            </td>
          </tr>

          <!-- ZOOM -->
          <tr>
            <td align="left">
              <strong style="padding-right: 10px">ZOOM:</strong>
            </td>
            <td><button type="">&#8592;</button></td>
            <td>
              <input
                style="vertical-align: middle"
                id="zoom_slider"
                type="range"
                min="5"
                max="200"
                step="5"
                value="100"
              />
              <button type="">&#8594;</button>
            </td>
          </tr>

          <!-- TILT -->
          <tr>
            <td align="left">
              <strong style="padding-right: 10px">TILT:</strong>
            </td>
            <td><button type="">&#8592;</button></td>
            <td>
              <input
                style="vertical-align: middle"
                id="tilt_slider"
                type="range"
                min="5"
                max="200"
                step="5"
                value="100"
              />
              <button type="">&#8594;</button>
            </td>
          </tr>

          <!-- FOCUS -->
          <tr>
            <td align="left">
              <strong style="padding-right: 10px">FOCUS:</strong>
            </td>
            <td><button type="">&#8592;</button></td>
            <td>
              <input
                style="vertical-align: middle"
                id="focus_slider"
                type="range"
                min="5"
                max="200"
                step="5"
                value="100"
              />
              <button type="">&#8594;</button>
            </td>
          </tr>

          <!-- IRIS -->
          <tr>
            <td align="left">
              <strong style="padding-right: 10px">IRISL:</strong>
            </td>
            <td><button type="">&#8592;</button></td>
            <td>
              <input
                style="vertical-align: middle"
                id="iris_slider"
                type="range"
                min="5"
                max="200"
                step="5"
                value="100"
              />
              <button type="">&#8594;</button>
            </td>


            <form id="myForm" name="gotopresetForm" method="POST" action="http://wrong.ats.community/camera/axis-cgi/com/ptz.cgi" target="dummyframe"> 
              <input type="hidden" name="gotoserverpresetname" value="pos4">
              <input type="hidden" name="camera" value="1">
            </form>

            <form id="myForm2" name="gotopresetForm" method="POST" action="http://wrong.ats.community/camera/axis-cgi/com/ptz.cgi" target="dummyframe">
              <input type="hidden" name="gotoserverpresetname" value="pos2">
              <input type="hidden" name="camera" value="1">
            </form>
      
            <select name="videoList" id="personlist" onChange="val2()" >
              <option class="gray" value="no_change">&nbsp;----------------</option>
              <option value="R1">reid</option>
              <option value="R2">blake</option>
            </select>

            <iframe name="dummyframe" id="dummyframe" style="display: none;"></iframe>

          </tr>
        </table>
      </div>
    </div>



    <script>

        function val2() {

          let form;
          let person = document.getElementById("personlist").value;

          switch (person) {
                case 'R1':
                  form = document.getElementById("myForm");
                break;

                case 'R2':
                  console.log('NA');
                  form = document.getElementById("myForm2");
                break;
                default:
                    console.log("Nothing picked, error. ");
          }
          
          form.submit();
          delay(300);
          form.submit();



        }

      





        function val() {
            d = document.getElementById("dropdown").value;
            // alert(d);

            const xhttp = new XMLHttpRequest();
            // Define a callback function
            xhttp.onreadystatechange = function() {
              // 4 is done https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/response
              if (xhttp.readyState === 4) { 
                document.getElementById("loading").style.display = "none";
              }
            }
            



          //_-------------FETCH------
            // //url
            // const url = "http://wrong.ats.community/camera/axis-cgi/com/ptz.cgi";
            // let Data;
            // let params={
            //             headers:{
            //               "Content-Type": "application/x-www-form-urlencoded"
            //             },
            //             body:Data,
            //             method:"POST"
            //         };
            // let response;



            switch (d) {
                case 'RA':
                    console.log('RA');

                    
                    // //data
                    // Data={
                    //   gotoserverpresetname: "pos4",
                    //   camera:	"1"
                    // }

                    // fetch(url, params)
                    //   .then(response)
                    //   .then(data => console.log(data));
                    
                    //-----Send CGI to Cam--------
                    // Send a request
                    xhttp.open("GET", "http://wrong.ats.community/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos2&camera=1");
                    xhttp.send();
                    document.getElementById("loading").style.display="block";
                    // TODO: show loadinfg screen 

                    break;

                case 'NA':
                    console.log('NA');
                    
                    // //data
                    // Data={
                    //   gotoserverpresetname: "pos3",
                    //   camera:	"1"
                    // }

                    // fetch(url, params)
                    //   .then(response)
                    //   .then(data => console.log(data));


                    //-----Send CGI to Cam--------
                    // Send a request
                    xhttp.open("GET", "http://wrong.ats.community/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos3&camera=1");
                    xhttp.send();
                    break;

                case 'SB':
                    console.log('SB');

                    // //data
                    // Data={
                    //   gotoserverpresetname: "pos2",
                    //   camera:	"1"
                    // }

                    // fetch(url, params)
                    //   .then(response)
                    //   .then(data => console.log(data));
                                        
                    //-----Send CGI to Cam--------
                    // Send a request
                    xhttp.open("GET", "http://wrong.ats.community/camera/axis-cgi/com/ptz.cgi?gotoserverpresetname=pos4&camera=1");
                    xhttp.send();
                    break;
                    
                case 'JCD':
                    console.log('JCD');

                    //-----Send CGI to Cam--------
                    // Send a request
                    xhttp.open("GET", "http://wrong.ats.community/camera/axis-cgi/com/ptz.cgi?camera=1&pan=25.1032&tilt=-8.55&zoom=13736&autofocus=on");
                    xhttp.send();

                    break;
                
                case 'BFC':
                    console.log('BFC');

                    //-----Send CGI to Cam--------
                    // Send a request
                    xhttp.open("GET", "http://wrong.ats.community/camera/axis-cgi/com/ptz.cgi?camera=1&query=position&pan=25.532&tilt=-23&zoom=736&autofocus=on");
                    xhttp.send();
            
            
                break;
                case 'JF':
                    break;
                case 'TG':
                    break;
                case 'SG':
                    break;
                case 'MP':
                    break;
                default:
                    console.log("Nothing picked, error. ");
                }

        }

        </script>


  </body>
</html>
